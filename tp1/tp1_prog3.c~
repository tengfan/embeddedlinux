#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
 #include <sys/wait.h>
 #include <string.h>
/* Partie 1 */
/*
void func(char nom[], char para[]){
	char chemin[20];
	sprintf(chemin, "/bin/%s", nom);
	execl(chemin, nom, para, NULL);
}

int main(void) {
	char nom[20];
	char para[5];
	int pid, ret;
	char logout[] = "logout";
	char para0[] = "0";
	while(1){
		printf("Commande > ");
		scanf("%s %s",nom, para);
		if(!strcmp(nom,logout) && !strcmp(para,para0)) exit(-1);
		
		pid = fork();
		if(pid == 0) func(nom,para);
		wait (&ret); //Il attend que le thread finit son travail
	}
	return 1;
}
*/

/*Partie 2 */
// execv, strtok, fgets
void func(char str[]){
	char chemin[20];
	char * tabArg[3];
    tabArg = strtok(str," ,.-");
    tabArg[3] = NULL;
	sprintf(chemin, "/bin/%s", tabArg[0]);
	execv(chemin, tabArg); 
}

int main(void) {
	int pid, ret;
	char logout[] = "logout";
	char para0[] = "0";
	while(1){
		printf("Commande > ");
		scanf("%s %s",nom, para);
		if(!strcmp(nom,logout) && !strcmp(para,para0)) exit(-1);
		
		pid = fork();
		if(pid == 0) func(nom,para);
		wait (&ret); //Il attend que le thread finit son travail
	}
	return 1;
}
